{% load bootstrap %}
{% load static %}
{% load i18n %}

<div class="table-responsive">
    <table id="tab_revocations" class="table table-condensed table-hover table-striped">
        <thead>
            <tr>
                <th class="col-md-1">{% trans "Date" %}</th>
                <th class="col-md-2">{% trans "Contact Name" %}</th>
                <th class="col-md-2">{% trans "Corporation / Alliance" %}</th>
                <th class="col-md-2">{% trans "Main Character" %}</th>
                <th class="col-md-1">{% trans "Scopes / State" %}</th>
                <th class="col-md-2">{% trans "Reason / Contact Labels" %}</th>
                <th class="col-md-2">{% trans "Actions" %}</th>
            </tr>
        </thead>
        <tbody>
            {% for contact in revocations %}
                <tr hx-target="this" hx-swap="delete">
                    <td>
                        {{ contact.request_date|date:DATETIME_FORMAT_HTML }}
                    </td>
                    <td>
                        <img src="{{ contact.contact_icon_url }}" class="img-circle"/>&nbsp;&nbsp;
                        <span class="copy_to_clipboard">
                            {{ contact.contact_name }}&nbsp;<i class="far fa-copy"></i>
                        </span>
                    </td>
                    <td>
                        [{{ contact.corporation_ticker }}] {{ contact.corporation_name }}
                        <br>
                        {{ contact.alliance_name }}
                    </td>
                    <td>
                        <img src="{{ contact.main_character_icon_url }}" class="img-circle"/>&nbsp;&nbsp;
                        [{{ contact.main_character_ticker }}] {{ contact.main_character_name }}
                    </td>
                    <td>
                        {% comment %} FIXME <bool-checkmark value="contact.has_scopes" true-title="Has required scopes" false-title="Missing Scopes add then using Add Scopes"></bool-checkmark> {% endcomment %}
                        {{ contact.state }}
                    </td>
                    <td>
                        {{ contact.reason }}<br>
                        {% comment %} FIXME <div ng-repeat="obj in contact.labels">{{ obj }}<span ng-if="!$last">, </span></div> {% endcomment %}
                    </td>
                    <td>
                        <button class="btn btn-success"
                                hx-put="{% url 'manage_revocations_write' contact.contact_id %}"
                                title="{% trans 'Confirm the standing was REMOVED in game' %}">
                            Confirm
                        </button>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <button class="btn btn-danger"
                                hx-confirm="{% trans 'Are you sure?' %}"
                                hx-delete="{% url 'manage_revocations_write' contact.contact_id %}"
                                title="{% trans 'Reject this revocation request' %}">
                            Reject
                        </button>
                    </td>
                </tr>
            {% empty %}
                {% include "standingsrequests/partials/_manage_empty_row.html" %}
            {% endfor %}
        </tbody>
    </table>
</div>
