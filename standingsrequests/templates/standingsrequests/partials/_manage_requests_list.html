{% load bootstrap %}
{% load static %}
{% load i18n %}

<div class="table-responsive">
    <table id="tab_requests" class="table table-condensed table-hover table-striped">
        <thead>
            <tr>
                <th class="col-md-1">{% trans "Date" %}</th>
                <th class="col-md-2">{% trans "Contact Name" %}</th>
                <th class="col-md-2">{% trans "Corporation / Alliance" %}</th>
                <th class="col-md-2">{% trans "Main Character" %}</th>
                <th class="col-md-3">{% trans "Scopes / State" %}</th>
                <th class="col-md-2">{% trans "Actions" %}</th>
            </tr>
        </thead>
        <tbody>
            {% for contact in requests %}
                <tr hx-target="this" hx-swap="delete">
                    <td>
                        {{ contact.request_date|date:DATETIME_FORMAT_HTML }}
                    </td>
                    <td>
                        <img src="{{ contact.contact_icon_url }}" class="img-circle"/>&nbsp;&nbsp;
                        <span class="copy_to_clipboard">
                            {{ contact.contact_name }}&nbsp;<i class="far fa-copy"></i>
                        </span>
                    </td>
                    <td>
                        [{{ contact.corporation_ticker }}] {{ contact.corporation_name }}
                        <br>
                        {{ contact.alliance_name }}
                    </td>
                    <td>
                        <img src="{{ contact.main_character_icon_url }}" class="img-circle"/>&nbsp;&nbsp;
                        [{{ contact.main_character_ticker }}] {{ contact.main_character_name }}
                    </td>
                    <td>
                        {% comment %} FIXME {% endcomment %} <bool-checkmark value="contact.has_scopes" true-title="Has required scopes" false-title="Missing Scopes add then using Add Scopes"></ bool-checkmark>
                        {{contact.state}}
                    </td>
                    <td>
                        <button class="btn btn-success"
                                hx-put="{% url 'manage_requests_write' contact.contact_id %}"
                                title="{% trans 'Confirm the standing was ADDED in game' %}">
                            Confirm
                        </button>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <button class="btn btn-danger"
                                hx-confirm="{% trans 'Are you sure?' %}"
                                hx-delete="{% url 'manage_requests_write' contact.contact_id %}"
                                title="{% trans 'Reject this standing request' %}">
                            Reject
                        </button>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td class="text-muted" colspan="9" style="text-align: left; vertical-align: middle;">
                        Empty
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
